#cmake_minimum_required(VERSION 3.7)
#project(basyco)

#set(CMAKE_CXX_STANDARD 17)

#set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake/Modules/")
#SET(CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS} " -pthread -lstdc++fs")

#set(CMAKE_LIBRARY_PATH  ${CMAKE_LIBRARY_PATH} "C:/_lib/poco-1.7.8p3")


find_package(Poco REQUIRED COMPONENTS  Net Util  Foundation REQUIRED)
find_package(Cereal CONFIG REQUIRED)
find_package(spdlog CONFIG REQUIRED)
#FIND_PACKAGE(CPPexperimental)

set(SOURCE_FILES p2p/node/NodeInfo.cpp p2p/node/NodeInfo.h p2p/modules/nodeNetworkModule/network/NetworkInfo.cpp p2p/modules/nodeNetworkModule/network/NetworkInfo.h p2p/node/Node.cpp p2p/node/Node.h p2p/modules/nodeNetworkModule/protocol/connection/ServerConnection.cpp p2p/modules/nodeNetworkModule/protocol/connection/ServerConnection.h p2p/modules/nodeNetworkModule/protocol/packet/BasePacket.cpp p2p/modules/nodeNetworkModule/protocol/packet/BasePacket.h p2p/modules/nodeNetworkModule/protocol/connection/ClientConnection.cpp p2p/modules/nodeNetworkModule/protocol/connection/ClientConnection.h p2p/modules/nodeNetworkModule/protocol/enum/Command.h p2p/modules/nodeNetworkModule/protocol/connection/Connection.cpp p2p/modules/nodeNetworkModule/protocol/connection/Connection.h p2p/modules/nodeNetworkModule/protocol/processor/ConnectionProcessor.cpp p2p/modules/nodeNetworkModule/protocol/processor/ConnectionProcessor.h p2p/modules/nodeNetworkModule/protocol/enum/Status.h p2p/modules/nodeNetworkModule/protocol/context/ConnectionContext.cpp p2p/modules/nodeNetworkModule/protocol/context/ConnectionContext.h p2p/node/context/NodeContext.cpp p2p/node/context/NodeContext.h p2p/modules/nodeNetworkModule/protocol/context/IContextSetup.h p2p/node/configuration/ConfigurationManager.cpp p2p/node/configuration/ConfigurationManager.h p2p/node/configuration/IConfig.h p2p/modules/nodeNetworkModule/protocol/packet/AuthPacket.cpp p2p/modules/nodeNetworkModule/protocol/packet/AuthPacket.h p2p/modules/nodeNetworkModule/protocol/logic/events/AuthEvent.cpp p2p/modules/nodeNetworkModule/protocol/logic/events/AuthEvent.h p2p/modules/nodeNetworkModule/protocol/logic/sources/ConnectionSource.cpp p2p/modules/nodeNetworkModule/protocol/logic/sources/ConnectionSource.h p2p/modules/nodeNetworkModule/protocol/logic/events/ConnectionEvent.cpp p2p/modules/nodeNetworkModule/protocol/logic/events/ConnectionEvent.h p2p/modules/nodeNetworkModule/protocol/logic/actions/ProtocolActions.cpp p2p/modules/nodeNetworkModule/protocol/logic/actions/ProtocolActions.h p2p/modules/nodeNetworkModule/protocol/logic/events/PacketEvent.cpp p2p/modules/nodeNetworkModule/protocol/logic/events/PacketEvent.h p2p/modules/nodeNetworkModule/protocol/logic/actions/BasePacketInfo.cpp p2p/modules/nodeNetworkModule/protocol/protocol/IProtocol.cpp p2p/modules/nodeNetworkModule/protocol/protocol/IProtocol.h p2p/modules/nodeNetworkModule/protocol/protocol/GravitonProtocol.cpp p2p/modules/nodeNetworkModule/protocol/protocol/GravitonProtocol.h p2p/modules/nodeNetworkModule/protocol/logic/events/NodeInfoEvent.cpp p2p/modules/nodeNetworkModule/protocol/logic/events/NodeInfoEvent.h p2p/modules/nodeNetworkModule/protocol/logic/sources/NodeSource.cpp p2p/modules/nodeNetworkModule/protocol/logic/sources/NodeSource.h p2p/modules/nodeNetworkModule/protocol/logic/actions/NodeActions.cpp p2p/modules/nodeNetworkModule/protocol/logic/actions/NodeActions.h p2p/modules/nodeNetworkModule/protocol/packet/NetworkInfoRequest.cpp p2p/modules/nodeNetworkModule/protocol/packet/NetworkInfoRequest.h p2p/modules/nodeNetworkModule/protocol/packet/NetworkInfoResponse.cpp p2p/modules/nodeNetworkModule/protocol/packet/NetworkInfoResponse.h p2p/modules/nodeNetworkModule/protocol/logic/events/NetworkInfoEvent.cpp p2p/modules/nodeNetworkModule/protocol/logic/events/NetworkInfoEvent.h p2p/modules/nodeNetworkModule/protocol/logic/sources/NetworkSource.cpp p2p/modules/nodeNetworkModule/protocol/logic/sources/NetworkSource.h p2p/modules/nodeNetworkModule/protocol/logic/actions/NetworkActions.cpp p2p/modules/nodeNetworkModule/protocol/logic/actions/NetworkActions.h p2p/modules/nodeNetworkModule/protocol/packet/info/PacketInfo.cpp p2p/modules/nodeNetworkModule/protocol/packet/info/PacketInfo.h p2p/modules/nodeNetworkModule/protocol/packet/NodeInfoGroup.cpp p2p/modules/nodeNetworkModule/protocol/packet/NodeInfoGroup.h p2p/modules/nodeNetworkModule/protocol/packet/NetworkInfoGroup.h p2p/modules/nodeNetworkModule/protocol/connection/IServerConnection.h p2p/modules/nodeNetworkModule/protocol/context/ProcessorContext.cpp p2p/modules/nodeNetworkModule/protocol/context/ProcessorContext.h p2p/modules/logic/ILogicModule.cpp p2p/modules/logic/ILogicModule.h p2p/node/module/NodeModule.cpp p2p/node/module/NodeModule.h p2p/node/INode.h p2p/modules/nodeNetworkModule/protocol/logic/events/NetworkingEvent.h p2p/modules/filesystem/FilesystemModule.cpp p2p/modules/filesystem/FilesystemModule.h p2p/modules/basic/BasicModule.cpp p2p/modules/basic/BasicModule.h p2p/modules/nodeNetworkModule/NodeNetworkModule.cpp p2p/modules/nodeNetworkModule/NodeNetworkModule.h p2p/dependency/DependencyManaged.cpp p2p/dependency/DependencyManaged.h p2p/dependency/DependencyManager.cpp p2p/dependency/DependencyManager.h p2p/dependency/Dependency.cpp p2p/dependency/Dependency.h p2p/dependency/IDependency.h p2p/dependency/IDependencyManaged.h p2p/modules/nodeNetworkModule/protocol/filter/PacketFilter.cpp p2p/modules/nodeNetworkModule/protocol/filter/PacketFilter.h p2p/role/Role.cpp p2p/role/Role.h p2p/role/Roles.cpp p2p/role/Roles.h p2p/role/RoleInvalidException.cpp p2p/role/RoleInvalidException.h p2p/role/RoleScope.cpp p2p/role/RoleScope.h p2p/modules/command/CommandModule.cpp p2p/modules/command/CommandModule.h p2p/modules/command/network/packet/CommandPacket.cpp p2p/modules/command/network/packet/CommandPacket.h p2p/node/module/INodeModule.h p2p/modules/command/ICommandsDirectory.h p2p/modules/command/StandardCommandsDirectory.h p2p/modules/command/network/logic/sources/CommandSource.cpp p2p/modules/command/network/logic/sources/CommandSource.h p2p/modules/command/network/logic/events/CommandEvent.cpp p2p/modules/command/network/logic/events/CommandEvent.h p2p/modules/command/network/logic/actions/CommandActions.cpp p2p/modules/command/network/logic/actions/CommandActions.h p2p/modules/nodeNetworkModule/protocol/context/exception/NodeContextNotSet.cpp p2p/modules/nodeNetworkModule/protocol/context/exception/NodeContextNotSet.h p2p/modules/filesystem/identification/ResourceIdentificator.cpp p2p/modules/filesystem/identification/ResourceIdentificator.h p2p/modules/filesystem/identification/SimplePathRI.cpp p2p/modules/filesystem/identification/SimplePathRI.h p2p/modules/filesystem/network/packet/BeginTransfer.cpp p2p/modules/filesystem/network/packet/BeginTransfer.h p2p/modules/filesystem/network/packet/FinishTransfer.cpp p2p/modules/filesystem/network/packet/FinishTransfer.h p2p/modules/filesystem/identification/TransferTypes.h p2p/modules/filesystem/network/logic/events/TransferEvent.cpp p2p/modules/filesystem/network/logic/events/TransferEvent.h p2p/modules/filesystem/network/logic/sources/TransferSource.cpp p2p/modules/filesystem/network/logic/sources/TransferSource.h p2p/modules/filesystem/transfer/TransferManager.cpp p2p/modules/filesystem/transfer/TransferManager.h p2p/modules/filesystem/network/packet/DataTransfer.cpp p2p/modules/filesystem/network/packet/DataTransfer.h p2p/modules/filesystem/network/packet/PropertiesTransfer.cpp p2p/modules/filesystem/network/packet/PropertiesTransfer.h p2p/modules/nodeNetworkModule/protocol/broadcast/BroadcastScope.h p2p/modules/nodeNetworkModule/remote/RemoteNode.cpp p2p/modules/nodeNetworkModule/remote/RemoteNode.h p2p/modules/nodeNetworkModule/remote/exception/RemoteNodeNotFoundException.cpp p2p/modules/nodeNetworkModule/remote/exception/RemoteNodeNotFoundException.h p2p/modules/nodeNetworkModule/remote/RemoteNodeContext.cpp p2p/modules/nodeNetworkModule/remote/RemoteNodeContext.h p2p/modules/nodeNetworkModule/remote/exception/NotRequestException.cpp p2p/modules/nodeNetworkModule/remote/exception/NotRequestException.h p2p/modules/nodeNetworkModule/protocol/packet/KeepAlivePacket.cpp p2p/modules/nodeNetworkModule/protocol/packet/KeepAlivePacket.h p2p/role/RoleDefinitions.cpp p2p/role/RoleDefinitions.h p2p/modules/nodeNetworkModule/protocol/filter/RoleFilter.cpp p2p/modules/nodeNetworkModule/protocol/filter/RoleFilter.h p2p/modules/auth/network/packet/AuthHelloPacket.cpp p2p/modules/auth/network/packet/AuthHelloPacket.h p2p/modules/auth/AuthModule.cpp p2p/modules/auth/AuthModule.h p2p/modules/auth/logic/sources/AuthSource.cpp p2p/modules/auth/logic/sources/AuthSource.h p2p/modules/auth/logic/events/AuthHelloEvent.cpp p2p/modules/auth/logic/events/AuthHelloEvent.h p2p/modules/auth/logic/actions/AuthActions.cpp p2p/modules/auth/logic/actions/AuthActions.h p2p/modules/nodeNetworkModule/network/RemoteNodeInfo.cpp p2p/modules/nodeNetworkModule/network/RemoteNodeInfo.h p2p/node/module/ModuleState.h p2p/modules/nodeNetworkModule/network/NetAddressType.h p2p/modules/filesystem/data/FileData.cpp p2p/modules/filesystem/data/FileData.h p2p/modules/nodeNetworkModule/protocol/logic/conditions/NetworkConditions.cpp p2p/modules/nodeNetworkModule/protocol/logic/conditions/NetworkConditions.h p2p/modules/filesystem/network/packet/TransferQuery.cpp p2p/modules/filesystem/network/packet/TransferQuery.h p2p/modules/filesystem/network/processor/NetworkProcessors.cpp p2p/modules/filesystem/network/processor/NetworkProcessors.h p2p/node/module/INodeModule.cpp p2p/node/configuration/DataFileNotFoundException.cpp p2p/node/configuration/DataFileNotFoundException.h p2p/modules/nodeNetworkModule/remote/exception/RemoteNodeConnectionException.cpp p2p/modules/nodeNetworkModule/remote/exception/RemoteNodeConnectionException.h p2p/modules/filesystem/transfer/TransferException.cpp p2p/modules/filesystem/transfer/TransferException.h p2p/node/module/logic/ModuleSource.cpp p2p/node/module/logic/ModuleSource.h p2p/node/module/logic/events/ModuleEvent.cpp p2p/node/module/logic/events/ModuleEvent.h)


add_library(p2p SHARED ${SOURCE_FILES})
target_include_directories(p2p PUBLIC ${CMAKE_CURRENT_SOURCE_DIR} PRIVATE SYSTEM spdlog::spdlog ${Poco_INCLUDE_DIRS} cereal::cereal)
message(CURRENT SOURCE: ${CMAKE_CURRENT_SOURCE_DIR})
target_link_libraries(p2p logic ${Poco_LIBRARIES} ${LIBS} spdlog::spdlog)
install(TARGETS p2p COMPONENT p2p)

add_subdirectory(test)